<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    使用树莓派作为打印机服务器 |
    
    Mr.Sheng</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
<main class="content">
  <section class="outer">
  <article id="post-使用树莓派作为打印机服务器" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h1 class="article-title" itemprop="name">
      使用树莓派作为打印机服务器
    </h1>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/09/12/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%BD%9C%E4%B8%BA%E6%89%93%E5%8D%B0%E6%9C%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time datetime="2020-09-12T11:59:36.000Z" itemprop="datePublished">2020-09-12</time>
</a>
                            
                    </div>
                    

                        
                            
    <div class="tocbot"></div>





                                

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <blockquote>
<p>由于学校打印店坑的属实离谱，而且距离我宿舍又太远，于是我在极端愤怒的情况下，买了一台老款打印机，型号为HP DeskJet 2130 series</p>
</blockquote>
<h2 id="连接Windows使用"><a href="#连接Windows使用" class="headerlink" title="连接Windows使用"></a>连接<code>Windows</code>使用</h2><p>不会吧不会吧不会还有人不知道怎么在<code>Windows</code>上连接使用打印机吧？</p>
<p>不会就看看<a href="https://support.hp.com/cn-zh/printer" target="_blank" rel="noopener">官网教程</a>吧</p>
<h2 id="共享？"><a href="#共享？" class="headerlink" title="共享？"></a>共享？</h2><p>当室友需要使用打印机怎么办？通过微信发送，然后打印？</p>
<a id="more"></a>

<p>当然是共享打印机啦！</p>
<p>但是<code>HP DeskJet 2130 series</code>只支持<code>USB</code>连接，可以购买下面的产品：</p>
<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912191237.PNG" style="zoom:25%;" />



<p>但是我刚好有一个闲置落灰的树莓派，可以把它搭建成打印机服务器——</p>
<h2 id="树莓派搭建打印机服务器"><a href="#树莓派搭建打印机服务器" class="headerlink" title="树莓派搭建打印机服务器"></a>树莓派搭建打印机服务器</h2><blockquote>
<p>树莓派型号：4B 2G内存</p>
<p>系统：Raspbian</p>
</blockquote>
<h3 id="安装cups"><a href="#安装cups" class="headerlink" title="安装cups"></a>安装<code>cups</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; apt upgrade</span><br><span class="line">sudo apt install cups</span><br></pre></td></tr></table></figure>

<p>修改<code>cups</code>配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/cups/cupsd.conf</span><br></pre></td></tr></table></figure>

<h4 id="修改1："><a href="#修改1：" class="headerlink" title="修改1："></a>修改1：</h4><p>修改前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Only listen for connections from the local machine.</span><br><span class="line">Listen localhost:631</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Only listen for connections from the local machine.</span><br><span class="line">#Listen localhost:631</span><br><span class="line">Listen 0.0.0.0:631</span><br><span class="line">Listen &#x2F;run&#x2F;cups&#x2F;cups.sock</span><br></pre></td></tr></table></figure>

<h4 id="修改2"><a href="#修改2" class="headerlink" title="修改2"></a>修改2</h4><p>修改前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Show shared printers on the local network.</span><br><span class="line">Browsing On</span><br><span class="line">BrowseLocalProtocols dnssd</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Show shared printers on the local network.</span><br><span class="line">Browsing On</span><br><span class="line">#BrowseLocalProtocols dnssd</span><br><span class="line">allow 192.168.0.* </span><br><span class="line">BrowseAllow all</span><br><span class="line">BrowseAddressLocalProtocols CUPS dnssd</span><br><span class="line">BrowseAddress @LOCA</span><br></pre></td></tr></table></figure>

<h4 id="修改3"><a href="#修改3" class="headerlink" title="修改3"></a>修改3</h4><p><code>&lt;Location /&gt;</code>、<code>&lt;Location /admin&gt;</code>里面添加<code>allow 192.168.2.*</code>，例如：</p>
<p>修改前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Restrict access to the server...</span><br><span class="line">&lt;Location &#x2F;&gt;</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Restrict access to the server...</span><br><span class="line">&lt;Location &#x2F;&gt;</span><br><span class="line">allow 192.168.2.*</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br></pre></td></tr></table></figure>



<h4 id="完整配置文件示例："><a href="#完整配置文件示例：" class="headerlink" title="完整配置文件示例："></a>完整配置文件示例：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># Configuration file for the CUPS scheduler.  See &quot;man cupsd.conf&quot; for a</span><br><span class="line"># complete description of this file.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Log general information in error_log - change &quot;warn&quot; to &quot;debug&quot;</span><br><span class="line"># for troubleshooting...</span><br><span class="line">LogLevel warn</span><br><span class="line">PageLogFormat</span><br><span class="line"></span><br><span class="line"># Deactivate CUPS&#39; internal logrotating, as we provide a better one, especially</span><br><span class="line"># LogLevel debug2 gets usable now</span><br><span class="line">MaxLogSize 0</span><br><span class="line"></span><br><span class="line"># Only listen for connections from the local machine.</span><br><span class="line">#Listen localhost:631</span><br><span class="line">Listen 0.0.0.0:631</span><br><span class="line">Listen &#x2F;run&#x2F;cups&#x2F;cups.sock</span><br><span class="line"></span><br><span class="line"># Show shared printers on the local network.</span><br><span class="line">Browsing On</span><br><span class="line">#BrowseLocalProtocols dnssd</span><br><span class="line">allow 192.168.0.* </span><br><span class="line">BrowseAllow all</span><br><span class="line">BrowseAddressLocalProtocols CUPS dnssd</span><br><span class="line">BrowseAddress @LOCA</span><br><span class="line"></span><br><span class="line"># Default authentication type, when authentication is required...</span><br><span class="line">DefaultAuthType Basic</span><br><span class="line"></span><br><span class="line"># Web interface setting...</span><br><span class="line">WebInterface Yes</span><br><span class="line"></span><br><span class="line"># Restrict access to the server...</span><br><span class="line">&lt;Location &#x2F;&gt;</span><br><span class="line">allow 192.168.2.*</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br><span class="line"></span><br><span class="line"># Restrict access to the admin pages...</span><br><span class="line">&lt;Location &#x2F;admin&gt;</span><br><span class="line">allow 192.168.2.*</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br><span class="line"></span><br><span class="line"># Restrict access to configuration files...</span><br><span class="line">&lt;Location &#x2F;admin&#x2F;conf&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br><span class="line"></span><br><span class="line"># Restrict access to log files...</span><br><span class="line">&lt;Location &#x2F;admin&#x2F;log&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">  Order allow,deny</span><br><span class="line">&lt;&#x2F;Location&gt;</span><br><span class="line"></span><br><span class="line"># Set the default printer&#x2F;job policies...</span><br><span class="line">&lt;Policy default&gt;</span><br><span class="line">  # Job&#x2F;subscription privacy...</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line"></span><br><span class="line">  # Job-related operations must be done by the owner or an administrator...</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All administration operations require an administrator to authenticate...</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All printer operations require a printer operator to authenticate...</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # Only the owner or an administrator can cancel or authenticate a job...</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line">&lt;&#x2F;Policy&gt;</span><br><span class="line"></span><br><span class="line"># Set the authenticated printer&#x2F;job policies...</span><br><span class="line">&lt;Policy authenticated&gt;</span><br><span class="line">  # Job&#x2F;subscription privacy...</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line"></span><br><span class="line">  # Job-related operations must be done by the owner or an administrator...</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All administration operations require an administrator to authenticate...</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All printer operations require a printer operator to authenticate...</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # Only the owner or an administrator can cancel or authenticate a job...</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line">&lt;&#x2F;Policy&gt;</span><br><span class="line"></span><br><span class="line"># Set the kerberized printer&#x2F;job policies...</span><br><span class="line">&lt;Policy kerberos&gt;</span><br><span class="line">  # Job&#x2F;subscription privacy...</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line"></span><br><span class="line">  # Job-related operations must be done by the owner or an administrator...</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All administration operations require an administrator to authenticate...</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # All printer operations require a printer operator to authenticate...</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  # Only the owner or an administrator can cancel or authenticate a job...</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line"></span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;&#x2F;Limit&gt;</span><br><span class="line">&lt;&#x2F;Policy&gt;</span><br></pre></td></tr></table></figure>



<h3 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install hplip</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following package was automatically installed and is no longer required:</span><br><span class="line">  rpi-eeprom-images</span><br><span class="line">Use &#39;apt autoremove&#39; to remove it.</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  hplip-data libhpmud0 libsane-hpaio printer-driver-hpcups printer-driver-postscript-hp python3-pexpect python3-ptyprocess python3-renderpm python3-reportlab python3-reportlab-accel</span><br><span class="line">Suggested packages:</span><br><span class="line">  hplip-doc hplip-gui python3-notify2 system-config-printer python-pexpect-doc python3-renderpm-dbg pdf-viewer python3-egenix-mxtexttools python-reportlab-doc</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  hplip hplip-data libhpmud0 libsane-hpaio printer-driver-hpcups printer-driver-postscript-hp python3-pexpect python3-ptyprocess python3-renderpm python3-reportlab</span><br><span class="line">  python3-reportlab-accel</span><br><span class="line">0 upgraded, 11 newly installed, 0 to remove and 0 not upgraded.</span><br><span class="line">Need to get 9,533 kB of archives.</span><br><span class="line">After this operation, 19.8 MB of additional disk space will be used.</span><br><span class="line">Do you want to continue? [Y&#x2F;n] Y</span><br><span class="line">Get:1 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf hplip-data all 3.18.12+dfsg0-2 [6,742 kB]</span><br><span class="line">Get:2 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf libhpmud0 armhf 3.18.12+dfsg0-2+b2 [169 kB]</span><br><span class="line">Get:3 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf libsane-hpaio armhf 3.18.12+dfsg0-2+b2 [199 kB]</span><br><span class="line">Get:4 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf printer-driver-hpcups armhf 3.18.12+dfsg0-2+b2 [328 kB]</span><br><span class="line">Get:5 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf python3-ptyprocess all 0.6.0-1 [13.2 kB]</span><br><span class="line">Get:6 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf python3-pexpect all 4.6.0-1 [52.4 kB]</span><br><span class="line">Get:7 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf python3-reportlab-accel armhf 3.5.13-1+deb10u1 [33.4 kB]</span><br><span class="line">Get:8 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf python3-reportlab all 3.5.13-1+deb10u1 [541 kB]</span><br><span class="line">Get:9 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf hplip armhf 3.18.12+dfsg0-2+b2 [276 kB]</span><br><span class="line">Get:10 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf printer-driver-postscript-hp armhf 3.18.12+dfsg0-2+b2 [1,115 kB]</span><br><span class="line">Get:11 http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;raspberry-pi-os&#x2F;raspbian buster&#x2F;main armhf python3-renderpm armhf 3.5.13-1+deb10u1 [64.0 kB]</span><br><span class="line">Fetched 9,533 kB in 3s (2,724 kB&#x2F;s)         </span><br><span class="line">Selecting previously unselected package hplip-data.</span><br><span class="line">(Reading database ... 99867 files and directories currently installed.)</span><br><span class="line">Preparing to unpack ...&#x2F;00-hplip-data_3.18.12+dfsg0-2_all.deb ...</span><br><span class="line">Unpacking hplip-data (3.18.12+dfsg0-2) ...</span><br><span class="line">Selecting previously unselected package libhpmud0:armhf.</span><br><span class="line">Preparing to unpack ...&#x2F;01-libhpmud0_3.18.12+dfsg0-2+b2_armhf.deb ...</span><br><span class="line">Unpacking libhpmud0:armhf (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Selecting previously unselected package libsane-hpaio:armhf.</span><br><span class="line">Preparing to unpack ...&#x2F;02-libsane-hpaio_3.18.12+dfsg0-2+b2_armhf.deb ...</span><br><span class="line">Unpacking libsane-hpaio:armhf (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Selecting previously unselected package printer-driver-hpcups.</span><br><span class="line">Preparing to unpack ...&#x2F;03-printer-driver-hpcups_3.18.12+dfsg0-2+b2_armhf.deb ...</span><br><span class="line">Unpacking printer-driver-hpcups (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Selecting previously unselected package python3-ptyprocess.</span><br><span class="line">Preparing to unpack ...&#x2F;04-python3-ptyprocess_0.6.0-1_all.deb ...</span><br><span class="line">Unpacking python3-ptyprocess (0.6.0-1) ...</span><br><span class="line">Selecting previously unselected package python3-pexpect.</span><br><span class="line">Preparing to unpack ...&#x2F;05-python3-pexpect_4.6.0-1_all.deb ...</span><br><span class="line">Unpacking python3-pexpect (4.6.0-1) ...</span><br><span class="line">Selecting previously unselected package python3-reportlab-accel:armhf.</span><br><span class="line">Preparing to unpack ...&#x2F;06-python3-reportlab-accel_3.5.13-1+deb10u1_armhf.deb ...</span><br><span class="line">Unpacking python3-reportlab-accel:armhf (3.5.13-1+deb10u1) ...</span><br><span class="line">Selecting previously unselected package python3-reportlab.</span><br><span class="line">Preparing to unpack ...&#x2F;07-python3-reportlab_3.5.13-1+deb10u1_all.deb ...</span><br><span class="line">Unpacking python3-reportlab (3.5.13-1+deb10u1) ...</span><br><span class="line">Selecting previously unselected package hplip.</span><br><span class="line">Preparing to unpack ...&#x2F;08-hplip_3.18.12+dfsg0-2+b2_armhf.deb ...</span><br><span class="line">Unpacking hplip (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Selecting previously unselected package printer-driver-postscript-hp.</span><br><span class="line">Preparing to unpack ...&#x2F;09-printer-driver-postscript-hp_3.18.12+dfsg0-2+b2_armhf.deb ...</span><br><span class="line">Unpacking printer-driver-postscript-hp (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Selecting previously unselected package python3-renderpm:armhf.</span><br><span class="line">Preparing to unpack ...&#x2F;10-python3-renderpm_3.5.13-1+deb10u1_armhf.deb ...</span><br><span class="line">Unpacking python3-renderpm:armhf (3.5.13-1+deb10u1) ...</span><br><span class="line">Setting up python3-renderpm:armhf (3.5.13-1+deb10u1) ...</span><br><span class="line">Setting up hplip-data (3.18.12+dfsg0-2) ...</span><br><span class="line">Setting up printer-driver-postscript-hp (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Setting up python3-reportlab-accel:armhf (3.5.13-1+deb10u1) ...</span><br><span class="line">Setting up python3-reportlab (3.5.13-1+deb10u1) ...</span><br><span class="line">Setting up libhpmud0:armhf (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Setting up libsane-hpaio:armhf (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Setting up python3-ptyprocess (0.6.0-1) ...</span><br><span class="line">Setting up python3-pexpect (4.6.0-1) ...</span><br><span class="line">Setting up printer-driver-hpcups (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Setting up hplip (3.18.12+dfsg0-2+b2) ...</span><br><span class="line">Creating&#x2F;updating hplip user account...</span><br><span class="line">Processing triggers for libc-bin (2.28-10+rpi1) ...</span><br><span class="line">Processing triggers for man-db (2.8.5-2) ...</span><br><span class="line">Processing triggers for dbus (1.12.20-0+deb10u1) ...</span><br><span class="line">Processing triggers for cups (2.2.10-6+deb10u3) ...</span><br><span class="line">Updating PPD files for hpcups ...</span><br><span class="line">Updating PPD files for postscript-hp ...</span><br></pre></td></tr></table></figure>

<h3 id="访问cups管理界面添加打印机"><a href="#访问cups管理界面添加打印机" class="headerlink" title="访问cups管理界面添加打印机"></a>访问<code>cups</code>管理界面添加打印机</h3><h5 id="访问https-树莓派IP-631进入后台页面："><a href="#访问https-树莓派IP-631进入后台页面：" class="headerlink" title="访问https://树莓派IP:631进入后台页面："></a>访问<code>https://树莓派IP:631</code>进入后台页面：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912192716.png" alt="cups后台界面"></h5><h5 id="在Administrator页面添加打印机："><a href="#在Administrator页面添加打印机：" class="headerlink" title="在Administrator页面添加打印机："></a>在<code>Administrator</code>页面添加打印机：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912192942.png" alt=""></h5><h5 id="选择HP-DeskJet-2130-series"><a href="#选择HP-DeskJet-2130-series" class="headerlink" title="选择HP DeskJet 2130 series:"></a>选择<code>HP DeskJet 2130 series</code>:<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912193245.png" alt=""></h5><h5 id="勾选共享打印机："><a href="#勾选共享打印机：" class="headerlink" title="勾选共享打印机："></a>勾选共享打印机：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912193436.png" alt=""></h5><h5 id="选择驱动，没有安装hplip的话会没有HP-DeskJet-2130-series的驱动程序："><a href="#选择驱动，没有安装hplip的话会没有HP-DeskJet-2130-series的驱动程序：" class="headerlink" title="选择驱动，没有安装hplip的话会没有HP DeskJet 2130 series的驱动程序："></a>选择驱动，没有安装<code>hplip</code>的话会没有<code>HP DeskJet 2130 series</code>的驱动程序：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912193606.png" alt=""></h5><h5 id="点击添加，打印机添加完毕："><a href="#点击添加，打印机添加完毕：" class="headerlink" title="点击添加，打印机添加完毕："></a>点击添加，打印机添加完毕：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912193803.png" alt=""></h5><h2 id="Windows-10连接打印机"><a href="#Windows-10连接打印机" class="headerlink" title="Windows 10连接打印机"></a>Windows 10连接打印机</h2><p><kbd>Windows</kbd>+<kbd>i</kbd>打开设置，进入<code>设备</code>:<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912194104.png" alt=""></p>
<p>选择<code>打印机和扫描仪</code>下的<code>添加打印机或扫描仪</code>：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912194247.png" alt=""></p>
<p>找到树莓派下的<code>HP DeskJet 2130 series</code>并点击添加设备：<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912194437.png" alt=""></p>
<p>而后就可以像本地打印机一样使用了。</p>
<h2 id="iPhone与iPad使用打印机"><a href="#iPhone与iPad使用打印机" class="headerlink" title="iPhone与iPad使用打印机"></a><code>iPhone</code>与<code>iPad</code>使用打印机</h2><img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912195455.png" style="zoom:50%;" />

<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912195528.png" style="zoom:50%;" />

<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912195551.png" style="zoom:50%;" />

<img src="https://myblog-figure-bed-1258528016.file.myqcloud.com/PicGo/20200912195612.png" style="zoom:50%;" />





<p>END</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="https://swzdl.github.io/2020/09/12/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%BD%9C%E4%B8%BA%E6%89%93%E5%8D%B0%E6%9C%BA%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="ckezme4ic0000p49z8vpo1kp2" class="article-share-link">
                                            分享
                                        </a>
                                        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" rel="tag">树莓派</a></li></ul>

                                    </footer>

    </div>

    
        
  <nav class="article-nav">
    
    
      <a href="/2020/06/12/%E6%BF%80%E6%B4%BBWindows%E5%92%8COffice/" class="article-nav-link">
        <strong class="article-nav-caption">后一篇</strong>
        <div class="article-nav-title">激活Windows和Office</div>
      </a>
    
  </nav>


            

                
                    
                        
                            

</article>
</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 Mr.Sheng</li>
      <li>只要在乎的人也在乎你，那就十分快乐，外加酷炫狂霸拽了</li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="Mr.Sheng"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>

<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




  
<script src="/js/tocbot.min.js"></script>

  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>



<script src="/js/ocean.js"></script>


</body>
</html>